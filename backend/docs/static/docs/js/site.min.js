function getArticle(){for(var a="ЮР"===$(".dropdown > .text")[0].innerHTML?$(".dropdown > .text")[0].innerHTML:$(".dropdown > .text")[0].innerHTML+$(".dropdown > .text")[1].innerHTML,b={title:$("input")[0].value,udk:$("input")[1].value,department:a,reviewer:{last_name:$("input")[2].value,first_name:$("input")[3].value,patronymic:$("input")[4].value,email:$("input")[5].value,diplom:$("input")[6].value,degree:$("input")[7].value,post:$("input")[8].value}},c=$("#authors").children().find("input, .dropdown > .text"),d=[],e=0;e<c.length;e+=8){var f={last_name:c[e].value,first_name:c[e+1].value,patronymic:c[e+2].value,birthday:c[e+3].value,group:c[e+4].value,email:c[e+5].value,phone:c[e+6].value,post:c[e+7].textContent};d.push(f)}return b.authors=d,b}function getDocuments(){return checkboxes=$(".ui.checkbox").checkbox("is checked"),{form:checkboxes[0],memo:checkboxes[1],claim:checkboxes[2],review:checkboxes[3]}}function sendData(a){obj={article:getArticle(),documents:getDocuments()},$.post("documents/generate",JSON.stringify(obj)).done(function(b){a(b.url)})}!function(){$("select.dropdown").not("#authors_count").dropdown(),$("#authors_count").dropdown("setting","onChange",function(a,b){if(currentAuthorsCount=$("#authors").children().size(),diff=a-currentAuthorsCount,diff<0)$("#authors").children().slice(diff).remove();else for(var c=0;c<diff;++c){var d=$("#authors > .one.column.row:first").clone().find("input").val("").end();$("#authors").append(d)}}),$(".ui.checkbox").checkbox("check"),$(".ui.checkbox").checkbox({onChange:function(){$("#documents_count").text("Выбрано: "+$.grep($(".ui.checkbox").checkbox("is checked"),function(a,b){return a===!0}).length)}}),$(".coupled.modal").modal({allowMultiple:!1}),$("#process_button").click(function(){$("#documents_modal").modal({onApprove:function(){return sendData(function(a){$("#download_modal").modal("show"),document.getElementById("url_field").value=location.href+"documents/download/"+a}),!1}}).modal("show")}),$("#download_button").click(function(){window.location.href=document.getElementById("url_field").value})}();